<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-mesh-particles-component@^0.4.0/aframe-mesh-particles-component.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
    <script src="https://unpkg.com/aframe-spe-particles-component@^1.0.4/dist/aframe-spe-particles-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>
    <script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene>
        <a-assets>
        <img src="./assets/play button.png" id="play"/>
        <img src="./assets/full_gift.png" id="gift"/>
        <img src="./assets/cover.png" id="cover"/>
        <img src="./assets/opengift.png" id="opengift"/>
        <img src="./assets/celebration.png" id="celebrate"/>
        <img src="./assets/open.png" id="open"/>
        <img id="1" src="./assets/1.JPG"/>
        <img id="2" src="./assets/2.jpg"/>
        <img id="3" src="./assets/3.jpg"/>
        <img id="4" src="./assets/4.jpg"/>
        <img id="5" src="./assets/5.jpg"/>
        <img id="6" src="./assets/6.jpg"/>
        <img id="7" src="./assets/7.jpg"/>
        <img id="8" src="./assets/8.jpg"/>
        <img id="9" src="./assets/9.jpg"/>
        <img id="10" src="./assets/10.jpg"/>
        <img id="11" src="./assets/11.jpg"/>
        <a-asset-item><video id="greenscreenvideo" src="./assets/greenscreen.mp4" loop="true"></video></a-asset-item>
        <a-asset-item><video id="twirl" src="./assets/twirl.mp4" loop="true"></video></a-asset-item>
        <a-asset-item id="cake" src="./assets/cake.glb"></a-asset-item>
        <a-asset-item id="card" src="./assets/birthday card.glb"></a-asset-item>
        </a-assets>

        <a-camera
        raycaster="objects: .clickable"
        cursor="rayOrigin:mouse"
        wasd-controls="enabled:false"
        rotation="0 0 0"
        raycaster="objects: .cantap"></a-camera>
      <a-sky
        src="./assets/background.jpg"
        material="repeat: 3 3; blending: normal; shader: flat; opacity:0.7"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 360000; easing: linear"
      ></a-sky>
      <a-video
      id="p1" 
      height="9"
      width="14"
      material="shader: chromakey; opacity:0; color: 0.1 0.9 0.2; src:#greenscreenvideo"
      position="0 1 -10"
      rotation="0 0 0"
      visible="false"> 
    </a-video>
     <a-plane 
      id="p2"
      height="9.5"
      width="14.85"
      material="color:#F7C5CC"
      position="0 1 -10.5"
      rotation="0 0 0"
      visible="false">
     </a-plane>
    <a-entity position="-1 1.5 -9.9">
        <a-text id="t1" text="font:https://cdn.aframe.io/fonts/mozillavr.fnt; value:BHAVI; height:7; width:18;color:#330066" visible="false" position="-0.5 0 0"></a-text>
    </a-entity>
    <a-entity id="btn1" class="clickable" geometry="primitive:circle; height:5; width:5" position="0 -1.7 -5" rotation="0 0 0" material="src:#play; opacity:1" scale="0.5 0.5 0.5"></a-entity>
    <a-entity id="fullgift" class="clickable" geometry="primitive: plane; width:7; height:5"
        material="src:#gift; transparent:true" scale="1 1 1" position="10 -1 3.5" rotation="0 -90 0"
        animation="property:scale; to: 1.2 1.2 1.2 ;dur:1000;loop: true" visible="true"></a-entity>
    <a-entity id="giftcover" geometry="primitive: plane; width:7; height:5"
      material="src:#cover; transparent:true" scale="1 1 1" position="10 8 3" rotation="0 -90 0"
      visible="false"></a-entity>
      <a-entity id="openpresent" geometry="primitive: plane; width:7; height:5"
      material="src:#opengift; transparent:true" scale="1 1 1" position="10 -6 3" rotation="0 -90 -7"
      visible="false"></a-entity>
      <a-entity id="gallery" geometry="primitive: plane; width:7; height:9"
      material="src:./assets/1.jpg; transparent:true; opacity:0" scale="1 1 1" position="10 1.05 3" rotation="-4 -102 0"></a-entity>
        <!--Cake cutting-->
      <a-gltf-model
        id="birthdaycake"
        src="#cake"
        position="-40 -13 5"
        rotation="0 0 0"
        scale="1 1 1" animation-mixer
        visible="false"></a-gltf-model>
      <a-entity id="btn2" class="clickable" geometry="primitive:circle; height:5; width:5" position="-5 -1.4 0.7" rotation="0 90 0" material="src:#celebrate; transparent:true; opacity:1" scale="0.7 0.7 0.7" animation="property:scale; to: 0.9 0.9 0.9 ;dur:1000;loop: true"></a-entity>
      <!-- <a-video
      id="p3" 
      height="9"
      width="14"
      material="shader: chromakey; opacity:0; color: 0.1 0.9 0.2; src:#confetti"
      position="-10 3 1"
      rotation="0 90 0"
      visible="false"> 
    </a-video> -->
    <a-entity id="confetti2" particle-system="color:red; enabled: true;opacity: 0.5; preset:default; particleCount:300; texture:./assets/heart.png;size: 2; velocityValue: 0 0 0" position="0 0 -1" rotation="0 0 0" visible="false"></a-entity>
    <a-video
      id="p3" 
      height="5"
      width="8"
      material="src:#twirl"
      position="-10 6 1"
      rotation="0 90 0"
      visible="false"> 
    </a-video>
    <!-- <a-entity id="confetti4" particle-system="accelerationSpread: 20 0 20; color: green; enabled: true;  particleCount: 200; opacity: 0.5; preset: default; size: 0.5; velocityValue: 0 20 0" position="-5 0.5 3.5" rotation="0 90 -45" visible="false"></a-entity>
    <a-entity id="confetti3" particle-system="accelerationSpread: 20 0 20; color: red; enabled: true;  particleCount: 200; opacity: 0.5; preset: default; size: 0.5; velocityValue: 0 20 0" position="-5 0.5 -2.5" rotation="0 90 45" visible="false"></a-entity>
    <a-entity id="confetti5" particle-system="accelerationSpread: 20 0 20; color: green; enabled: true;  particleCount: 200; opacity: 0.5; preset: default; size: 0.5; velocityValue: 0 20 0" position="-5 0.5 -2.5" rotation="0 90 45" visible="false"></a-entity> -->
    <a-gltf-model
        id="birthdaycard"
        src="#card"
        position="0.3 1 4"
        rotation="90 180 0"
        scale="1 1 1"></a-gltf-model>
    <a-entity id="msg" geometry="primitive:plane; height:1.3; width:1.3" position="0.1 1.03 4" rotation="0 180 0" material="color:white" visible="true"></a-entity>
    <a-entity position="0.1 1.1 3">
        <a-text id="t2"
          text="font:https://cdn.aframe.io/fonts/mozillavr.fnt; value: Happy Birthday to my \n beautiful wife! Your presence in\nmy life is a blessing beyond \n measure. You fill my days with \nlove, joy, and endless happiness.\n On your special day, I want to\n remind you of how much you\n mean to me.You are not just \nmy wife but also my best friend \n and soulmate. I love you more \nthan words can express.Here's \nto celebrating you today and \nevery day.\n Happy Birthday, my love!;wordwrap:12;height:6; width:1.9; color:red;align:center"
          rotation="0 180 0"
          visible="false"
          position="0 -0.01 0"
        ></a-text></a-entity>
    <a-entity id="btn3" class="clickable" geometry="primitive:plane; height:6; width:6" position="0.2 -1.2 4" rotation="0 180 0" material="src:#open; transparent:true" scale="0.3 0.3 0.3"></a-entity>

      <a-light type="ambient" position="-3.4 2 -5"></a-light>
    </a-scene>

    <script>
        let i = 2;
        var btn1 = document.getElementById('btn1');
        var p1 = document.getElementById('p1');
        var p2 = document.getElementById('p2');
        var t1 = document.getElementById('t1');
        var greenscreenvideo = document.getElementById('greenscreenvideo');
        var fullgift = document.getElementById('fullgift');
        var openpresent = document.getElementById('openpresent');
        var gallery = document.getElementById('gallery');
        var btn2 = document.getElementById('btn2');
        var p3 = document.getElementById('p3');
        var confetti2= document.getElementById('confetti2');
        var btn3 = document.getElementById('btn3');
        var birthdaycard = document.getElementById('birthdaycard');
        var birthdaycake = document.getElementById('birthdaycake');
        var msg = document.getElementById('msg');
        var t2 = document.getElementById('t2');
        var twirlvideo = document.getElementById('twirl');

        var sound = new Howl({
            src: ['./assets/birthday song.mp3']});

        var sound1 = new Howl({
            src: ['./assets/audio.mp3']});
        
        var sound2 = new Howl({
            src: ['./assets/twirlsong.mp3']});

        btn1.addEventListener('click', function(){
        greenscreenvideo.play();
        setTimeout(()=>{
            p1.setAttribute('visible','true');
            p2.setAttribute('visible','true');
            t1.setAttribute('visible','true');
            sound.play();
        },300);
        });

        fullgift.addEventListener('click',function(){
            fullgift.setAttribute('visible','false');
            giftcover.setAttribute('visible','true');
            openpresent.setAttribute('visible','true');
            sound1.play();
            sound.stop();
            gallery.setAttribute('animation',{'property':'material.opacity','to':'1','dur':'1000'});
            gallery.setAttribute('animation__1',{'property':'scale','to':{x: 1,y: 1,z:1},'dur':'3000','loop':'true'});
        });

        gallery.addEventListener('animationcomplete',function() {
        gallery.removeAttribute('animation');
        gallery.setAttribute('material',`src:#${i}; opacity:0`);
        gallery.setAttribute('animation',{'property':'material.opacity','to':'1','dur':'1500','loop':'2','dir':'alternate','easing':'easeInOutElastic'});
        i++;
        if(i == 12){
            i=1;
        }
      });

      btn2.addEventListener('click', function(){
        setTimeout(()=>{
            birthdaycake.setAttribute('visible','true');
            confetti2.setAttribute('visible','true');
            p3.setAttribute('visible','true')
            twirl.play();
            sound2.play();
        },300);
        });

        btn3.addEventListener('click', function(){
            birthdaycard.setAttribute('animation-mixer', 'loop:once; clampWhenFinished:true;');
            sound1.stop();
            setTimeout(()=>{
            msg.setAttribute('animation',{'property': 'position','to':'0.1 1.03 3'});
            msg.setAttribute('visible','true');
        },2500);
            setTimeout(()=>{
                t2.setAttribute('visible','true');
            },3000);
        });
    </script>
  </body>
</html>  
